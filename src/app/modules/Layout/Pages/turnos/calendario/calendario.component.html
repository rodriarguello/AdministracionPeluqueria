



<div class="container mt-5">

    <div class="d-flex flex-column align-items-center justify-content-between mt-4 me-2" >
        <h2 class="text-center fs-2 mt-4 ">Turnero Peluquería Canina</h2>
        <button mat-raised-button color="primary" class="mt-3" (click)="mostrarDetallesCalendario()">Ver detalles/modificar calendario</button>

    </div>

    
    <div class="d-flex flex-column align-items-center my-5">
        <div class="d-flex w-100 justify-content-center mb-5">

            <mat-form-field appearance="outline">
                <mat-label>Fecha de Turno</mat-label>
                <input matInput [matDatepicker]="picker"  [(ngModel)]="fecha" (dateChange)="mostrarTurnos()">
                <mat-hint>Fecha Seleccionada</mat-hint>
                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
        </div>
        <div class="d-flex w-100 justify-content-between px-4">
            <button mat-raised-button color="accent" (click)="semanaAnterior()">Semana Anterior</button>

            <button mat-raised-button color="accent" (click)="semanaSiguiente()">Semana Siguiente</button>
        </div>
        
    </div>


    

    <div class="d-flex contenedor-calendario">



    
    
    <ul *ngIf="listLunes.length!=0;else sinTurnoLunes">
        <li class="headers fs-5 lunes">{{cabecerasFechas[0]| formatearTituloFechas}}</li>
        <li *ngFor="let turno of listLunes" [matMenuTriggerFor]="menu" class="turno fs-6 py-2 text-center" 
        [ngClass]="{'turno-disponible':turno.disponible,'turno-ocupado':!turno.disponible}"  (click)="turnoMenu = turno">
            {{turno.horario|slice:0:5}}
        </li>

    </ul>

    <ng-template #sinTurnoLunes>
        <ul>
            <li class="headers fs-5 lunes">{{cabecerasFechas[0]| formatearTituloFechas}}</li>
            <li *ngFor="let horario of listHorarios" class="fs-6 py-2 text-center"><span >---</span></li>
        </ul>
    </ng-template>

    <ul *ngIf="listMartes.length!=0;else sinTurnoMartes">
        <li class="headers fs-5">{{cabecerasFechas[1]| formatearTituloFechas}}</li>
        <li *ngFor="let turno of listMartes" [matMenuTriggerFor]="menu" class="turno fs-6 py-2 text-center" 
        [ngClass]="{'turno-disponible':turno.disponible,'turno-ocupado':!turno.disponible}" (click)="turnoMenu = turno">
            
        {{turno.horario|slice:0:5}}</li>

    </ul>

    <ng-template #sinTurnoMartes>
        <ul>
            <li class="headers fs-5">{{cabecerasFechas[1]| formatearTituloFechas}}</li>
            <li *ngFor="let horario of listHorarios" class="fs-6 py-2 text-center"><span>---</span></li>
        </ul>
    </ng-template>

    <ul *ngIf="listMiercoles.length!=0;else sinTurnoMiercoles">
        <li class="headers fs-5">{{cabecerasFechas[2]| formatearTituloFechas}}</li>
        <li *ngFor="let turno of listMiercoles" [matMenuTriggerFor]="menu" class="turno fs-6 py-2 text-center" 
        [ngClass]="{'turno-disponible':turno.disponible,'turno-ocupado':!turno.disponible}" (click)="turnoMenu = turno" >
        {{turno.horario|slice:0:5}}</li>

    </ul>

    <ng-template #sinTurnoMiercoles>
        <ul>
            <li class="headers fs-5">{{cabecerasFechas[2]| formatearTituloFechas}}</li>
            <li *ngFor="let horario of listHorarios" class="fs-6 py-2 text-center"><span >---</span></li>
        </ul>
    </ng-template>

    <ul *ngIf="listJueves.length!=0;else sinTurnoJueves">
        <li class="headers fs-5">{{cabecerasFechas[3]| formatearTituloFechas}}</li>
        <li *ngFor="let turno of listJueves" [matMenuTriggerFor]="menu" class="turno fs-6 py-2 text-center"
        [ngClass]="{'turno-disponible':turno.disponible,'turno-ocupado':!turno.disponible}" (click)="turnoMenu = turno">
            {{turno.horario|slice:0:5}}</li>

    </ul>

    <ng-template #sinTurnoJueves>
        <ul>
            <li class="headers fs-5">{{cabecerasFechas[3]| formatearTituloFechas}}</li>
            <li *ngFor="let horario of listHorarios" class="fs-6 py-2 text-center"><span >---</span></li>
        </ul>
    </ng-template>

    <ul *ngIf="listViernes.length!=0;else sinTurnoViernes">
        <li class="headers fs-5">{{cabecerasFechas[4]| formatearTituloFechas}}</li>
        <li *ngFor="let turno of listViernes"[matMenuTriggerFor]="menu" class="turno fs-6 py-2 text-center"
        [ngClass]="{'turno-disponible':turno.disponible,'turno-ocupado':!turno.disponible}" (click)="turnoMenu = turno">
        {{turno.horario|slice:0:5}}</li>

    </ul>

    <ng-template #sinTurnoViernes>
        <ul>
            <li class="headers fs-5">{{cabecerasFechas[4]| formatearTituloFechas}}</li>
            <li *ngFor="let horario of listHorarios" class="fs-6 py-2 text-center" ><span >---</span></li>
        </ul>
    </ng-template>
    
    
    <ul *ngIf="listSabado.length!=0;else sinTurnoSabado">
        <li class="headers fs-5">{{cabecerasFechas[5]| formatearTituloFechas}}</li>
        <li *ngFor="let turno of listSabado" [matMenuTriggerFor]="menu" class="turno fs-6 py-2 text-center"
        [ngClass]="{'turno-disponible':turno.disponible,'turno-ocupado':!turno.disponible}" (click)="turnoMenu = turno">
        {{turno.horario|slice:0:5}}</li>

    </ul>

    <ng-template #sinTurnoSabado>
        <ul>
            <li class="headers fs-5">{{cabecerasFechas[5]| formatearTituloFechas}}</li>
            <li *ngFor="let horario of listHorarios" class="fs-6 py-2 text-center"><span >---</span></li>
        </ul>
    </ng-template>




    <ul *ngIf="listDomingo.length!=0;else sinTurnoDomingo">
        <li class="headers fs-5 domingo">{{cabecerasFechas[6]| formatearTituloFechas}}</li>
        <li *ngFor="let turno of listDomingo" [matMenuTriggerFor]="menu" class="turno fs-6 py-2 text-center"
        [ngClass]="{'turno-disponible':turno.disponible,'turno-ocupado':!turno.disponible}" (click)="turnoMenu = turno">
        {{turno.horario|slice:0:5}}</li>

    </ul>

    <ng-template #sinTurnoDomingo>
        <ul>
            <li class="headers fs-5 domingo">{{cabecerasFechas[6]| formatearTituloFechas}}</li>
            <li *ngFor="let horario of listHorarios" class="fs-6 py-2 text-center sin-turno"><span >---</span></li>
        </ul>
    </ng-template>
    
    <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="reservarTurno(turnoMenu)" [disabled]="!turnoMenu.disponible" >
          <mat-icon>dialpad</mat-icon>
          <span>Reservar</span>
        </button>
        <button mat-menu-item (click)="verDetalles(turnoMenu)" [disabled]="turnoMenu.disponible">
            <mat-icon style="color: dodgerblue;">find_in_page</mat-icon>
          <span>Detalles</span>
        </button>
        <button mat-menu-item [disabled]="turnoMenu.disponible || turnoMenu.mascota === null || turnoMenu.asistio" (click)="cancelarReserva(turnoMenu)">
            <mat-icon color="warn">event_busy</mat-icon>
          <span>Cancelar Reserva</span>
        </button>
        <button mat-menu-item [disabled]="turnoMenu.disponible" >
            <mat-icon color="primary">ballot</mat-icon>
            <span>Asistió</span>
            <mat-checkbox class="ms-2" [checked]="turnoMenu.asistio" [disabled]="turnoMenu.mascota === null" (change)="modificarAsistencia(turnoMenu, input.checked)" #input  color="primary"></mat-checkbox>
          </button>
      </mat-menu>

</div>
 
</div>